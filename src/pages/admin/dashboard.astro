---
import AdminDashboard from '../../components/admin/AdminDashboard.jsx';
import ThemeManager from '../../components/ThemeToggleButton.jsx'; // Corrected this import from your original file
---
<html lang="en" class="h-full">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Admin Dashboard - Prestige Rentals</title>
    <ThemeManager />

    {/* --- START: IMMEDIATE AUTH CHECK --- */}
    <script is:inline>
        // Add console log for debugging
        console.log("Running immediate auth check in <head>...");
        const token = localStorage.getItem('adminToken');
        console.log("Found token:", token); // Log the token value

        if (!token) {
            console.log("No token found, redirecting to /login...");
            // If no token, redirect to the login page immediately
            window.location.href = '/login';
        } else {
            console.log("Token found, allowing page load.");
        }
    </script>
    {/* --- END: IMMEDIATE AUTH CHECK --- */}

</head>
<body class="bg-gray-100 dark:bg-gray-900 font-sans h-full">
    {/* This component will now only load if the script above
      did NOT redirect the user.
    */}
    <AdminDashboard client:load />
</body>
</html>

